binance:
  api_key: "${BINANCE_API_KEY}"
  api_secret: "${BINANCE_API_SECRET}"
  proxy:
    http:  "http://127.0.0.1:7890"
    https: "http://127.0.0.1:7890"

coingecko:
  api_key: "${COINGECKO_API_KEY}"  # 可为空或填写公共 API 密钥

mysql:
  host: "localhost"
  port: 3306
  user: "root"
  password: "${MYSQL_PASSWORD}"
  database: "quant_trading"
  charset: "utf8mb4"

data_loader:
  topn: 100             # 获取成交额排名前N的合约
  interval: "1h"       # 主周期K线
  aux_interval: ["5m", "15m", "4h", "1d"]   # 辅助周期K线
  start:  # 起始日期 例如"2024-06-01" 默认获取一年
  end:     # 结束日期
  cache_dir: "data/klines"
  sentiment_cache: "data/sentiment"
  rate_limit_sleep: 0.05   # 每次请求后休息 50ms，1s 20 次 ≪ 2400/min
  excluded_list: [""]

feature_engineering:
  cache_dir: "data/klines"
  merged_dir: "data/merged"
  merged_table_path: "data/merged/merged_table.csv"
  feature_cols_path: "data/merged/feature_cols.txt"
  topn: 100
  mode: train                        # train 或 inference
  scaler_path: scalers/all_features_scaler.json

feature_selector:
  target: target_up   # 也可换 target_up
  top_n: 100             # 每周期保留前 N

models:
  1h:
    up: models/model_1h_up.pkl
    down: models/model_1h_down.pkl
    vol: models/model_1h_vol.pkl
  4h:
    up: models/model_4h_up.pkl
    down: models/model_4h_down.pkl
    vol: models/model_4h_vol.pkl
  d1:
    up: models/model_1d_up.pkl
    down: models/model_1d_down.pkl
    vol: models/model_1d_vol.pkl

database:
  uri: "mysql+pymysql://user:pwd@host:3306/quant_trading"

feature_cols:

  1h:
    # —— 价格 / 动量 ——
    - pct_chg1_1h          # 榜首动量:contentReference[oaicite:0]{index=0}
    - pct_chg6_1h          # 补足短→中窗口
    - cci_delta_1h         # 趋势斜率
    - bear_streak_1h       # 连跌计数
    # —— 跨周期价差 ——
    - close_spread_1h_4h   # 乖离幅度:contentReference[oaicite:1]{index=1}
    # —— 成交量 / 资金流 ——
    - obv_delta_1h         # 量价背离:contentReference[oaicite:2]{index=2}
    # —— 蜡烛形态 ——
    - upper_wick_ratio_1h  # 上影抛压
    # —— 时间因子 ——
    - hour_of_day          # 日内节奏
    - day_of_week          # 周期性效应
    # —— 趋势确认 ——
    - bull_streak_1h       # 连涨计数
    - cci_1h               # 绝对趋势值

  4h:
    # —— 价格 / 动量 ——
    - pct_chg6_4h          # 中期动量:contentReference[oaicite:3]{index=3}
    - pct_chg3_4h          # 较短窗口补充
    - rsi_slope_4h         # RSI 斜率
    # —— 波动率 ——
    - atr_pct_ratio_1h_4h  # 波动压缩 / 扩张:contentReference[oaicite:4]{index=4}
    - atr_chg_4h           # ATR 变化幅
    # —— 成交量 / 情绪 ——
    - vol_roc_4h           # 量能加速
    - cg_total_volume_roc_d1 # 市场总体量能:contentReference[oaicite:5]{index=5}
    # —— 蜡烛形态 ——
    - upper_wick_ratio_4h  # 中期抛压
    - lower_wick_ratio_4h  # 中期承接
    # —— 统计形态 ——
    - kc_width_pct_chg_d1  # Keltner 通道宽度变化（跨期）
    - atr_pct_d1           # 日线波动背景

  1d:
    # —— 宏观 / 链上 ——
    - cg_market_cap_roc_d1 # 总市值动量:contentReference[oaicite:6]{index=6}
    # —— 趋势 / 动量 ——
    - macd_signal_d1       # MACD 信号线
    - rsi_diff_1h_4h       # 短-中期背离:contentReference[oaicite:7]{index=7}
    - cci_d1               # 日级趋势
    # —— 波动率 ——
    - atr_pct_d1           # 日级 ATR
    - hv_14d_d1            # 14 日历史波动
    # —— 成交量 ——
    - vol_roc_d1           # 日级量能
    - vol_ma_ratio_long_d1 # 长期均量比
    # —— 蜡烛形态 ——
    - lower_wick_ratio_d1  # 日线下影承接
    # —— 统计形态 ——
    - hv_14d_1h            # 补充尾部风险（高排且与上列低相关）

train_settings:
  by_symbol: false
  min_rows: 500
  time_ranges: []
